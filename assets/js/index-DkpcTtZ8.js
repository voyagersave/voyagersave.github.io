import{e as S,V as b,g as R,h as U,i as o,j as t,W as $,u as B,X as K,Y as P,Z as T,l as E,O as F,_ as M,$ as N,H as q,v as w,U as v,w as r,r as a,a0 as V,a1 as C,F as G}from"./vendor-DhogOeV5.js";import{w as O,a as j,u as A,_ as W}from"./index-DAgYdeBu.js";const H={account:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},Q=S({__name:"index",props:{imageUrl:{},width:{default:320},height:{default:160}},setup(z,{expose:d}){const l=b(!1);let i;const m=()=>{u(),i&&i()},u=()=>{l.value=!1};return d({handleClose:u,open:s=>{s&&(i=s),l.value=!0}}),(s,c)=>(U(),R("div",null,[o(t($),{imgs:[s.imageUrl],"canvas-width":s.width,"canvas-height":s.height,show:l.value,onClose:u,onSuccess:m},null,8,["imgs","canvas-width","canvas-height","show"])]))}}),X=O(Q),Y={class:"login-bg",flex:"~ justify-center items-center",bg:"no-repeat cover center"},Z={"p-5":"","bg-white":"","dark:bg-black":"","rounded-lg":"","w-70":""},J={"font-semibold":"","text-xl":"","text-center":"","mb-4":""},ee="Ov23liyRpMRmQeOGgqel",oe=S({__name:"index",setup(z){const d=F();j();const{t:l}=B(),i=A(),m=K();P(m);const u="ave",f=b(),s=b(),c=T({account:"admin",password:"123456"}),h=E.debounce(()=>{var e;(e=s.value)==null||e.validate(n=>{n&&f.value.open(()=>{i.setToken(new Date().getTime().toString()),d.replace("/")})})},500),D=`${location.origin}/#/login`,y=M("state",new Date().toLocaleString()),I=()=>{const e=`https://github.com/login/oauth/authorize?client_id=${ee}&redirect_uri=${encodeURIComponent(D)}&scope=user&state=${y.value}`;window.open(e,"oauthWindow","width=600,height=700")&&window.addEventListener("message",k,!1)},k=e=>{const{code:n,state:p}=e.data;n&&p&&(i.setToken(n||""),d.replace("/")),window.removeEventListener("message",k)};return N(()=>{const e=new URLSearchParams(location.search);e.get("code")&&e.get("state")&&(e.get("code"),e.get("state"),y.value,window.opener.postMessage({code:e.get("code"),state:e.get("state")},location.origin),window.close())}),(e,n)=>{a("el-switch"),a("SvgIcon"),a("el-dropdown-item"),a("el-dropdown-menu"),a("el-dropdown");const p=a("el-input"),g=a("el-form-item"),x=a("el-button"),L=a("el-form");return U(),R(G,null,[q("",!0),w("div",Y,[w("div",Z,[w("div",J,v(t(u)),1),o(L,{ref_key:"formRef",ref:s,model:c,rules:t(H)},{default:r(()=>[o(g,{prop:"account"},{default:r(()=>[o(p,{modelValue:c.account,"onUpdate:modelValue":n[3]||(n[3]=_=>c.account=_),"prefix-icon":"UserFilled",clearable:"",placeholder:t(l)("login.account"),onKeyup:V(t(h),["enter"])},null,8,["modelValue","placeholder","onKeyup"])]),_:1}),o(g,{prop:"password"},{default:r(()=>[o(p,{modelValue:c.password,"onUpdate:modelValue":n[4]||(n[4]=_=>c.password=_),"prefix-icon":"lock",clearable:"",placeholder:t(l)("login.password"),"show-password":"",onKeyup:V(t(h),["enter"])},null,8,["modelValue","placeholder","onKeyup"])]),_:1}),o(g,null,{default:r(()=>[o(x,{type:"primary","w-full":"",onClick:t(h)},{default:r(()=>[C(v(t(l)("login.login")),1)]),_:1},8,["onClick"])]),_:1}),o(g,null,{default:r(()=>[o(x,{type:"info","w-full":"",onClick:I},{default:r(()=>[C(v(t(l)("login.auth")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),o(t(X),{ref_key:"puzzleVerifyRef",ref:f},null,512)],64)}}}),se=W(oe,[["__scopeId","data-v-44e21a37"]]);export{se as default};
